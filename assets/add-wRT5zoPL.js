import{r as p,I as y,a as _,J as B,k as E,w as l,b as t,u as I,o as N,d as a,j as c,E as b}from"./index-BaJaAyi_.js";import{a as U,u as j,c as q}from"./role-Dxqyi0J-.js";const D={__name:"add",setup(z){const g=y(),V=I(),u=p(!1),m=g.params.id;u.value=!!m;const i=p(null),o=_({name:"",desc:"",status:"enable"}),w=_({name:[{required:!0,message:"请输入角色名称",trigger:"blur"}],desc:[{required:!0,message:"请输入角色描述",trigger:"blur"}]}),v=async()=>{const s=await U(Number(m));Object.assign(o,s.data)},R=s=>{var e;(e=i.value)==null||e.validate(async n=>{if(n)s(!0),u.value?(await j(o),b.success("编辑成功")):(await q(o),b.success("添加成功")),s(!1),V.back();else return!1})};return B(()=>{u.value&&v()}),(s,e)=>{const n=t("el-input"),d=t("el-form-item"),f=t("el-radio"),k=t("el-radio-group"),x=t("el-form"),C=t("o-form-wrap");return N(),E(C,{title:"角色管理",onConfirm:R},{default:l(()=>[a(x,{ref_key:"ruleForm",ref:i,class:"w-100",model:o,rules:w,"label-position":"top"},{default:l(()=>[a(d,{label:"角色名称",prop:"name"},{default:l(()=>[a(n,{modelValue:o.name,"onUpdate:modelValue":e[0]||(e[0]=r=>o.name=r),placeholder:"请输入角色名称"},null,8,["modelValue"])]),_:1}),a(d,{label:"角色状态",prop:"name"},{default:l(()=>[a(k,{modelValue:o.status,"onUpdate:modelValue":e[1]||(e[1]=r=>o.status=r)},{default:l(()=>[a(f,{label:"enable",size:"large"},{default:l(()=>e[3]||(e[3]=[c("启用")])),_:1,__:[3]}),a(f,{label:"disabled",size:"large"},{default:l(()=>e[4]||(e[4]=[c("禁用")])),_:1,__:[4]})]),_:1},8,["modelValue"])]),_:1}),a(d,{label:"角色描述：",prop:"desc"},{default:l(()=>[a(n,{modelValue:o.desc,"onUpdate:modelValue":e[2]||(e[2]=r=>o.desc=r),placeholder:"请输入角色描述"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1})}}};export{D as default};
