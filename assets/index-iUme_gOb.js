import{l as D,m as Ie,n as R,r as y,f as r,u as W,p as S,q as Oe,_ as x,b as u,c as V,o as d,d as i,v as G,x as B,k as m,w as f,T as J,F as T,y as j,e as p,z as g,t as k,A as C,B as K,C as Q,D as $,G as A,j as z,E as X,H as Y,I as H,J as Z,h as ee,i as te,K as Re,L as se,M as Be,N as ne}from"./index-BaJaAyi_.js";import{u as P,l as oe}from"./user-CJb-cpVL.js";import{c as ae}from"./elementPlus-Buq_lanw.js";import{a as ce}from"./avatar-rhuhCorh.js";import{l as le}from"./logo-_P8HlvPZ.js";import"./role-Dxqyi0J-.js";const O=(t,e)=>{if(Array.prototype.findIndex)return t.findIndex(e);let s=-1;return t.some((o,n,l)=>e(o,n,l)?(s=n,!0):!1),s},Ne=D("tagsView",{state:()=>({visitedViews:[],cachedViews:new Set,selectedTag:void 0}),getters:{getVisitedViews(t){return t.visitedViews},getCachedViews(t){return Array.from(t.cachedViews)},getSelectedTag(t){return t.selectedTag}},actions:{addView(t){this.addVisitedView(t),this.addCachedView()},addVisitedView(t){var e,s;this.visitedViews.some(o=>o.path===t.path)||(e=t.meta)!=null&&e.noTagsView||this.visitedViews.push({...t,title:((s=t.meta)==null?void 0:s.title)||"no-name"})},addCachedView(){const t=new Set;for(const o of this.visitedViews){const n=o;!(n!=null&&n.meta)||n.meta.noCache||t.add(n.name)}const e=Array.from(this.cachedViews).sort().toString(),s=Array.from(t).sort().toString();e!==s&&(this.cachedViews=t)},delView(t){this.delVisitedView(t),this.addCachedView()},delVisitedView(t){const e=this.visitedViews.findIndex(s=>s.path===t.path);e>-1&&this.visitedViews.splice(e,1)},delCachedView(){const t=R.currentRoute.value,e=O(this.getCachedViews,s=>s===t.name);e>-1&&this.cachedViews.delete(this.getCachedViews[e])},delAllViews(){this.delAllVisitedViews(),this.addCachedView()},delAllVisitedViews(){const t=P();this.visitedViews=t.getUserObj?this.visitedViews.filter(e=>{var s;return(s=e.meta)==null?void 0:s.affix}):[]},delOthersViews(t){this.delOthersVisitedViews(t),this.addCachedView()},delOthersVisitedViews(t){this.visitedViews=this.visitedViews.filter(e=>{var s;return((s=e.meta)==null?void 0:s.affix)||e.path===t.path})},delLeftViews(t){const e=O(this.visitedViews,s=>s.path===t.path);e>-1&&(this.visitedViews=this.visitedViews.filter((s,o)=>{var n;return((n=s.meta)==null?void 0:n.affix)||s.path===t.path||o>e}),this.addCachedView())},delRightViews(t){const e=O(this.visitedViews,s=>s.path===t.path);e>-1&&(this.visitedViews=this.visitedViews.filter((s,o)=>{var n;return((n=s.meta)==null?void 0:n.affix)||s.path===t.path||o<e}),this.addCachedView())},updateVisitedView(t){for(let e=0;e<this.visitedViews.length;e++)if(this.visitedViews[e].path===t.path){this.visitedViews[e]={...this.visitedViews[e],...t};break}},setSelectedTag(t){this.selectedTag=t},setTitle(t,e){var s;for(const o of this.visitedViews)if(o.path===(e||((s=this.selectedTag)==null?void 0:s.path))){o.meta.title=t;break}}},persist:!1});const ie={class:"full-screen"},re={__name:"Screenfull",setup(t){const e=y(!1),s=()=>{document.fullscreenElement?(document.exitFullscreen(),e.value=!1):(document.documentElement.requestFullscreen(),e.value=!0)};return(o,n)=>{const l=u("SvgIcon");return d(),V("div",ie,[i(l,{name:e.value?"fullscreen-exit":"fullscreen",onClick:s},null,8,["name"])])}}},ue=x(re,[["__scopeId","data-v-ba2266fa"]]),F=(t,e)=>{if(G(e))return e;const s=e.startsWith("/")||!e?e:`/${e}`;return`${t}${s}`.replace(/\/\//g,"/").trim()};function U(t,e=""){var o;const s=[];for(const n of t){const l=(n==null?void 0:n.meta)||{};if(l.hidden&&!l.canTo)continue;const a=!l.alwaysShow&&((o=n.children)==null?void 0:o.length)===1?{...n.children[0],path:F(n.path,n.children[0].path)}:{...n};a.path=F(e,a.path),a.children&&(a.children=U(a.children,a.path)),s.push(a)}return s}const de={id:"id",children:"children",pid:"pid"},q=t=>Object.assign({},de,t),fe=(t,e={})=>{e=q(e);const{children:s}=e,o=[...t];for(let n=0;n<o.length;n++)o[n][s]&&o.splice(n+1,0,...o[n][s]);return o},_e=(t,e,s={})=>{s=q(s);const o=s.children;function n(l){return l.map(a=>({...a})).filter(a=>(a[o]=a[o]&&n(a[o]),e(a)||a[o]&&a[o].length))}return n(t)},pe={class:"breadcrumb-item-inner"},he={__name:"index",setup(t){const{getPrefixCls:e}=K(),s=e("breadcrumb"),{currentRoute:o}=W(),n=y([]),l=S(()=>U(Q));function a(){var h;const _=((h=o.value.matched.slice(-1)[0])==null?void 0:h.path)||"";n.value=_e(r(l),c=>c.path===_)}const v=S(()=>(fe(r(n))||[]).map(c=>({...c,disabled:!c.redirect||c.redirect==="noredirect",meta:c.meta||{}})).slice(1));return B(()=>o.value,_=>{_.path.startsWith("/redirect/")||a()},{immediate:!0}),(_,h)=>{const c=u("BaseIcon"),b=u("el-breadcrumb-item"),I=u("el-breadcrumb");return d(),m(I,{class:C(`${r(s)} breadcrumb-wrapper`),separator:"/"},{default:f(()=>[i(J,{appear:"","enter-active-class":"animate__animated animate__fadeInRight",tag:"div"},{default:f(()=>[(d(!0),V(T,null,j(v.value,w=>(d(),m(b,{key:w.name,to:w.disabled?"":w.path,class:"breadcrumb-item"},{default:f(()=>{var L;return[p("div",pe,[w.meta.icon?(d(),m(c,{key:0,icon:w.meta.icon},null,8,["icon"])):g("",!0),p("span",null,k(((L=w.meta)==null?void 0:L.title)||""),1)])]}),_:2},1032,["to"]))),128))]),_:1})]),_:1},8,["class"])}}},me=x(he,[["__scopeId","data-v-58149f1b"]]),ve={class:"header-left"},we={class:"header-right"},Ve={class:"user-dropdown"},ge={class:"name"},be=Object.assign({name:"OHeader"},{__name:"Header",setup(t){const e=P(),s=$(),{user:o}=A(e),{collapse:n}=A(s),l=()=>{s.setCollapse(!s.collapse)},a=()=>{ae("确认退出当前账户吗？","提示",{autofocus:!1,type:"warning"}).then(async()=>{(await oe()).code===200&&(R.push("/login"),X.success("退出登录成功"),Y(),R.push("/login"))})};return(v,_)=>{const h=u("BaseIcon"),c=u("el-avatar"),b=u("el-dropdown-item"),I=u("el-dropdown-menu"),w=u("el-dropdown"),L=u("el-header");return d(),m(L,null,{default:f(()=>[p("div",ve,[i(h,{size:24,icon:r(n)?"expand":"fold",onClick:l},null,8,["icon"]),i(me)]),p("div",we,[i(ue),i(w,null,{dropdown:f(()=>[i(I,null,{default:f(()=>[i(b,{onClick:a},{default:f(()=>_[0]||(_[0]=[z("退出登录")])),_:1,__:[0]})]),_:1})]),default:f(()=>[p("div",Ve,[i(c,{src:r(o).avatar||r(ce)},null,8,["src"]),p("span",ge,k(r(o).name),1)])]),_:1})])]),_:1})}}}),M=x(be,[["__scopeId","data-v-63ad03c3"]]),xe={__name:"MenuItem",props:{menuList:{type:Array,default:()=>[]}},setup(t){const e=H(),s=W();function o(n){n.path!==e.path&&s.push(n.path)}return(n,l)=>{const a=u("BaseIcon"),v=u("el-menu-item"),_=u("menu-item",!0),h=u("el-sub-menu");return d(!0),V(T,null,j(t.menuList,c=>(d(),V(T,{key:c.id},[!c.children||c.children.length===0?(d(),m(v,{key:0,index:c.path,onClick:b=>o(c)},{title:f(()=>[z(k(c.name),1)]),default:f(()=>[c.icon?(d(),m(a,{key:0,icon:c.icon},null,8,["icon"])):g("",!0)]),_:2},1032,["index","onClick"])):(d(),m(h,{key:1,index:c.name},{title:f(()=>[c.icon?(d(),m(a,{key:0,icon:c.icon},null,8,["icon"])):g("",!0),p("span",null,k(c.name),1)]),default:f(()=>[i(_,{"menu-list":c.children},null,8,["menu-list"])]),_:2},1032,["index"]))],64))),128)}}},Ce=Object.assign({name:"OMenu"},{__name:"Menu",setup(t){const e=H(),s=$(),o=y(""),n=y([{id:"home",name:"首页",icon:"HomeFilled",path:"/home"},{id:"system",name:"系统管理",icon:"Platform",children:[{id:"user",name:"用户管理",path:"/system/user"},{id:"role",name:"角色管理",path:"/system/role"}]}]);return Z(()=>{}),B(()=>e,l=>{const{meta:a}=l;o.value=a.activePath},{immediate:!0,deep:!0}),(l,a)=>{const v=u("el-menu"),_=u("el-scrollbar");return d(),m(_,{class:"menu-container"},{default:f(()=>[i(v,{collapse:r(s).collapse,"default-active":o.value},{default:f(()=>[i(xe,{"menu-list":n.value},null,8,["menu-list"])]),_:1},8,["collapse","default-active"])]),_:1})}}}),E=x(Ce,[["__scopeId","data-v-f298d4b3"]]),ye=["src"],Se=["textContent"],Te={__name:"TitleLogo",setup(t){const e=$(),s=S(()=>e.getLayout),o=S(()=>e.getCollapse),n=y(!0);return B(()=>o.value,l=>{if(r(s)==="topLeft"){n.value=!0;return}else n.value=!l}),(l,a)=>(d(),V("div",{class:"logo-title",onClick:a[0]||(a[0]=te(()=>l.$router.push("/"),["stop"]))},[p("a",null,[p("img",{src:r(le)},null,8,ye),p("span",{class:"title",textContent:k(r(ee))},null,8,Se)])]))}},N=x(Te,[["__scopeId","data-v-b8a75faa"]]);const ke={class:"sum-header"},Le={__name:"index",setup(t){const e=$(),s=P(),o=S(()=>e.getLayout);se(()=>{ne()&&s.getUser()});const n=()=>{e.setCollapse(!0)};return(l,a)=>{const v=u("Settings"),_=u("router-view"),h=u("el-scrollbar"),c=u("el-main"),b=u("el-container");return d(),m(b,null,{default:f(()=>[o.value==="classic"?(d(),V(T,{key:0},[i(M,{class:C({"top-left-header":!r(e).mobile,"top-left-header-collapse":r(e).collapse&&!r(e).mobile})},null,8,["class"]),p("div",{class:C({"sum-menu":!0,"sum-menu-is-collapse":r(e).collapse,"sum-menu-is-mobile":r(e).mobile})},[i(N),i(E)],2)],64)):g("",!0),o.value==="topLeft"?(d(),V(T,{key:1},[p("div",ke,[i(N),i(M)]),i(E,{style:{position:"absolute"},class:C({"classic-menu-is-mobile":r(e).mobile})},null,8,["class"])],64)):g("",!0),r(e).mobile&&!r(e).collapse?(d(),V("div",{key:2,class:"mobile-overlay",onClick:n})):g("",!0),i(v),i(c,{class:C([r(e).collapse?"is-collapse":"",r(e).mobile?"is-mobile":""])},{default:f(()=>[g("",!0),i(h,{class:"main-scrollbar"},{default:f(()=>[i(_)]),_:1})]),_:1},8,["class"])]),_:1})}}},We=x(Le,[["__scopeId","data-v-0a7c5cc5"]]);export{We as default};
